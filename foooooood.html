<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>EAT IT UP - å°ç£å°åƒæ¥æ¥æ¨‚</title>
    <link rel="icon" href="diet.png" type="image/png">
    
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f2f2f2;
            text-align: center;
        }
        #gameArea {
            width: 400px;
            height: 500px;
            /* ä¿®æ­£ï¼šç§»é™¤ images/ */
            background-image: url("background.png"); 
            background-size: cover;
            border: 2px solid #333;
            margin: 20px auto;
            position: relative;
            overflow: hidden;
        }
        #basket {
            width: 80px;
            height: 50px;
            /* ä¿®æ­£ï¼šç§»é™¤ images/ ä¸¦ä¿®æ­£ .png.png */
            background-image: url("box.png"); 
            background-size: contain;
            background-repeat: no-repeat;
            position: absolute;
            bottom: 10px;
            left: 160px;
        }
        .food {
            position: absolute;
            width: 40px;
            height: 40px;
            top: 0;
        }
        #scoreBoard {
            width: 160px;
            height: 50px;
            margin: 10px auto;
            /* ä¿®æ­£ï¼šç§»é™¤ images/ */
            background-image: url("score.png"); 
            background-size: cover;
            line-height: 50px;
            font-weight: bold;
        }
        #startBtn {
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            background-color: #ff9800;
            color: white;
            border: none;
            border-radius: 5px;
        }
        #gameOver {
            display: none;
            font-size: 24px;
            font-weight: bold;
            color: red;
            margin-top: 10px;
        }
        #rules {
            width: 400px;
            margin: 10px auto;
            text-align: left;
            font-size: 14px;
            background: #fff;
            padding: 10px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>

    <h1>å°ç£å°åƒæ¥æ¥æ¨‚</h1>
    <button id="startBtn">START</button>

    <div id="scoreBoard">åˆ†æ•¸ï¼š<span id="score">0</span></div>

    <div id="gameArea">
        <div id="basket"></div>
    </div>

    <div id="gameOver">éŠæˆ²çµæŸï¼</div>

    <div id="rules">
        <strong>ğŸ± éŠæˆ²è¦å‰‡èªªæ˜ï¼š</strong>
        <ul>
            <li>é»æ“Š START é–‹å§‹éŠæˆ²</li>
            <li>ä½¿ç”¨éµç›¤ â† â†’ æ§åˆ¶ç±ƒå­</li>
            <li>æ¥åˆ°å°ç£å°åƒåˆ†æ•¸ +1</li>
            <li>æ²’æ¥åˆ°ä»»ä½•å°åƒï¼ˆæ‰å‡ºåº•éƒ¨ï¼‰ï¼ŒéŠæˆ²çµæŸ</li>
        </ul>
    </div>

    <script>
        const gameArea = document.getElementById('gameArea');
        const basket = document.getElementById('basket');
        const scoreSpan = document.getElementById('score');
        const startBtn = document.getElementById('startBtn');
        const gameOverText = document.getElementById('gameOver');

        let basketX = 160;
        let score = 0;
        let gameRunning = false;
        let foodTimer;

        // ç¢ºä¿é€™äº›æª”åè·Ÿä½ çš„åœ–ç‰‡æª”æ¡ˆå®Œå…¨ä¸€è‡´ï¼ˆæ³¨æ„å¤§å°å¯«ï¼‰
        const foods = [
            'food_1.png', 
            'food_2.png', 
            'food_3.png', 
            'food_4.png', 
            'food_5.png'
        ];

        document.addEventListener('keydown', e => {
            if (!gameRunning) return;
            if (e.key === 'ArrowLeft' && basketX > 0) basketX -= 20;
            if (e.key === 'ArrowRight' && basketX < 320) basketX += 20;
            basket.style.left = basketX + 'px';
        });

        function createFood() {
            if (!gameRunning) return;
            const food = document.createElement('img');
            food.src = foods[Math.floor(Math.random() * foods.length)];
            food.className = 'food';
            food.style.left = Math.random() * 360 + 'px';
            gameArea.appendChild(food);

            let y = 0;
            const fall = setInterval(() => {
                if (!gameRunning) {
                    clearInterval(fall);
                    food.remove();
                    return;
                }
                y += 3;
                food.style.top = y + 'px';

                // ç¢°æ’åˆ¤æ–·
                if (y > 440 && y < 480 && food.offsetLeft + 40 > basketX && food.offsetLeft < basketX + 80) {
                    clearInterval(fall);
                    food.remove();
                    score++;
                    scoreSpan.textContent = score;
                }

                // æ²’æ¥åˆ°æ‰å‡ºåº•éƒ¨
                if (y > 500) {
                    clearInterval(fall);
                    endGame();
                }
            }, 20);
        }

        function startGame() {
            // æ¸…ç©ºç•«é¢
            const allFoods = document.querySelectorAll('.food');
            allFoods.forEach(f => f.remove());

            // é‡ç½®æ•¸å€¼
            score = 0;
            scoreSpan.textContent = '0';
            basketX = 160;
            basket.style.left = basketX + 'px';
            gameRunning = true;
            gameOverText.style.display = 'none';
            startBtn.innerText = 'RESTART';

            // å•Ÿå‹•è¨ˆæ™‚å™¨
            clearInterval(foodTimer);
            foodTimer = setInterval(createFood, 1000);
        }

        function endGame() {
            gameRunning = false;
            clearInterval(foodTimer);
            gameOverText.style.display = 'block';
            
            // ç§»é™¤æ‰€æœ‰é£Ÿç‰©
            const allFoods = document.querySelectorAll('.food');
            allFoods.forEach(f => f.remove());
        }

        startBtn.addEventListener('click', startGame);
    </script>
</body>
</html>
