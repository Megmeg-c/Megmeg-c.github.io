<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°ç£å°åƒæ¥åŠ›è³½</title>
    <link rel="icon" href="images/favicon.png" type="image/png">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="game-header">
        <h1>å°ç£å°åƒæ¥åŠ›è³½ ğŸ‡¹ğŸ‡¼</h1>
    </header>

    <div id="scoreboard" class="scoreboard">
        <h2>å¾—åˆ†: <span id="score">0</span></h2>
    </div>

    <div id="game-container">
        <div id="game-area">
            
            <div id="basket">
                <img src="images/basket.png" alt="æ¥å°åƒçš„ç±ƒå­">
            </div>

            <div id="start-screen" class="screen active">
                <button id="start-button">START éŠæˆ²é–‹å§‹</button>
            </div>
            
            <div id="game-over-message" class="screen">
                <h2>éŠæˆ²çµæŸï¼</h2>
                <p>æœªæ¥åˆ°å°åƒï¼ŒæŒ‘æˆ°å¤±æ•—ï¼</p>
                <button id="restart-button">é‡æ–°é–‹å§‹</button>
            </div>
        </div>
    </div>

    <section class="rules-section">
        <h3>éŠæˆ²è¦å‰‡èªªæ˜</h3>
        <p><strong>å¦‚ä½•é–‹å§‹ï¼š</strong> é»æ“Šä¸­å¤®çš„ **START** æŒ‰éˆ•ã€‚</p>
        <p><strong>å¦‚ä½•æ“ä½œï¼š</strong> ä½¿ç”¨éµç›¤çš„ **å·¦ç®­é ­ (â†)** å’Œ **å³ç®­é ­ (â†’)** æ§åˆ¶ç±ƒå­å·¦å³ç§»å‹•ã€‚</p>
        <p><strong>ä½•æ™‚åŠ åˆ†ï¼š</strong> æˆåŠŸè®“ç±ƒå­æ¥ä½æ‰è½çš„å°åƒï¼Œ**åˆ†æ•¸ +1**ã€‚</p>
        <p><strong>ä½•æ™‚çµæŸï¼š** åªè¦ **ä»»ä¸€å€‹å°åƒæ‰å‡ºéŠæˆ²ç•«é¢åº•éƒ¨** (æœªè¢«æ¥åˆ°)ï¼ŒéŠæˆ²ç«‹åˆ»çµæŸã€‚</p>
    </section>

    <script src="script.js"></script>
</body>
</html>
/* é€šç”¨æ¨£å¼ */
body {
    font-family: 'Arial', sans-serif;
    background-color: #f4f4f9;
    color: #333;
    margin: 0;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.game-header {
    text-align: center;
    margin-bottom: 20px;
}

/* 4ï¸âƒ£ è¨ˆåˆ†æ¿ */
.scoreboard {
    padding: 10px 20px;
    margin-bottom: 20px;
    border: 3px solid #ff7f50; 
    border-radius: 8px;
    background-color: #ffe0b2; 
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
.scoreboard h2 {
    margin: 0;
    color: #d84315; 
}
#score {
    font-size: 1.5em;
    font-weight: bold;
    color: #e65100; 
}

/* éŠæˆ²å®¹å™¨ï¼Œè®“éŠæˆ²å€ç½®ä¸­ä¸¦å¢åŠ é™°å½± */
#game-container {
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    margin-bottom: 30px;
}

/* 2ï¸âƒ£ éŠæˆ²å€åŸŸ */
#game-area {
    width: 500px; /* å›ºå®šå¯¬åº¦ */
    height: 600px; /* å›ºå®šé«˜åº¦ */
    border: 5px solid #a0522d; 
    overflow: hidden; 
    position: relative; /* é—œéµï¼šçµ•å°å®šä½çš„åŸºæº–é» */
    /* è«‹ç¢ºä¿ images/background.jpg å­˜åœ¨ */
    background-image: url('images/background.jpg');
    background-size: cover;
    background-position: center;
}

/* 1ï¸âƒ£ é–‹å§‹ç•«é¢ & éŠæˆ²çµæŸç•«é¢ (ä½œç‚ºé®ç½©) */
.screen {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    display: none; 
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 100;
    text-align: center;
}
.screen.active {
    display: flex; /* å•Ÿç”¨æ™‚é¡¯ç¤º */
}

/* æŒ‰éˆ•æ¨£å¼ */
#start-button, #restart-button {
    padding: 15px 30px;
    font-size: 1.2em;
    font-weight: bold;
    background-color: #4CAF50; 
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
}
#start-button:hover, #restart-button:hover {
    background-color: #45a049;
}

/* 3ï¸âƒ£ ç±ƒå­ (ç©å®¶è§’è‰²) */
#basket {
    position: absolute; 
    bottom: 0; 
    width: 100px; 
    height: 80px; 
    z-index: 50; 
    transition: left 0.05s linear; /* è®“éµç›¤ç§»å‹•æ›´æµæš¢ */
}
#basket img {
    width: 100%;
    height: 100%;
    object-fit: contain; 
}

/* æ‰è½çš„å°åƒåœ–ç‰‡æ¨£å¼ */
.falling-food {
    position: absolute; 
    top: -60px; /* åˆå§‹ä½ç½®åœ¨ç•«é¢å¤–ä¸Šæ–¹ */
    width: 60px; 
    height: 60px;
}
.falling-food img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

/* 5ï¸âƒ£ éŠæˆ²è¦å‰‡èªªæ˜ */
.rules-section {
    width: 500px;
    background-color: #fff;
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}
.rules-section h3 {
    color: #e65100;
    border-bottom: 2px solid #e65100;
    padding-bottom: 5px;
    margin-top: 0;
}
// --- å°ˆæ¡ˆå…¨åŸŸè®Šæ•¸ ---
const gameArea = document.getElementById('game-area');
const basket = document.getElementById('basket');
const scoreDisplay = document.getElementById('score');
const startScreen = document.getElementById('start-screen');
const gameOverMessage = document.getElementById('game-over-message');
const startButton = document.getElementById('start-button');
const restartButton = document.getElementById('restart-button');

let score = 0;
let isGameRunning = false;
let basketPositionX = 0; 

// éŠæˆ²å¸¸é‡
const basketSpeed = 15; 
const basketWidth = 100; 
const gameAreaWidth = 500;
const gameAreaHeight = 600;
const foodSpeed = 5; // å°åƒæ‰è½é€Ÿåº¦
const foodSize = 60; // å°åƒå¯¬é«˜

let foodDropInterval; // å°åƒç”Ÿæˆè¨ˆæ™‚å™¨
let foodMoveInterval; // å°åƒç§»å‹•/ç¢°æ’æª¢æ¸¬è¨ˆæ™‚å™¨

// äº”ç¨®ä¸åŒçš„å°ç£å°åƒåœ–ç‰‡è·¯å¾‘ (è«‹ç¢ºèªé€™äº›åœ–ç‰‡æª”åå’Œè·¯å¾‘æ­£ç¢º)
const foodImages = [
    'images/chicken-fillet.png',
    'images/bubble-tea.png',
    'images/braised-pork-rice.png',
    'images/stinky-tofu.png',
    'images/beef-noodles.png'
];

// --- éŠæˆ²æµç¨‹æ§åˆ¶ ---

// è¨­ç½®ç±ƒå­çš„åˆå§‹ä½ç½® (æ°´å¹³ç½®ä¸­)
function initializeBasket() {
    basketPositionX = (gameAreaWidth / 2) - (basketWidth / 2); 
    basket.style.left = `${basketPositionX}px`;
}

// æ ¸å¿ƒï¼šç§»é™¤ç•«é¢ä¸Šçš„æ‰€æœ‰å°åƒ (ç¬¦åˆè¦æ±‚ï¼šéŠæˆ²çµæŸæˆ–é‡æ–°é–‹å§‹å‰æ¸…ç©º)
function clearAllFood() {
    const foods = document.querySelectorAll('.falling-food');
    foods.forEach(food => food.remove());
}

// éŠæˆ²é–‹å§‹æµç¨‹
function startGame() {
    if (isGameRunning) {
        // é¿å…å¤šé‡å•Ÿå‹•
        clearInterval(foodDropInterval);
        clearInterval(foodMoveInterval);
    }
    
    // ç•«é¢æ¸…ç©ºã€åˆ†æ•¸æ­¸é›¶ã€ç‹€æ…‹é‡ç½® (ç¬¦åˆè¦æ±‚)
    clearAllFood();
    score = 0;
    scoreDisplay.textContent = score;
    isGameRunning = true;
    
    // éš±è—ç•«é¢
    startScreen.classList.remove('active');
    gameOverMessage.classList.remove('active');

    // ç±ƒå­å›åˆ°åŸæœ¬ä½ç½®
    initializeBasket();

    // å•Ÿå‹•è¨ˆæ™‚å™¨ (ä¸å¯æœ‰å¤šé‡è¨ˆæ™‚å™¨é€ æˆ bug)
    foodDropInterval = setInterval(createFood, 1500); // æ¯ 1.5 ç§’ç”Ÿæˆä¸€å€‹å°åƒ
    foodMoveInterval = setInterval(moveFoodAndCheckCollision, 50); // æ¯ 50ms æ›´æ–°ä½ç½®å’Œæª¢æ¸¬
}

// éŠæˆ²çµæŸæµç¨‹
function endGame() {
    if (!isGameRunning) return;

    isGameRunning = false;
    
    // æ¸…é™¤è¨ˆæ™‚å™¨
    clearInterval(foodDropInterval);
    clearInterval(foodMoveInterval);

    // é¡¯ç¤ºéŠæˆ²çµæŸç•«é¢
    gameOverMessage.classList.add('active');
    
    // ç•«é¢ä¸Šçš„æ‰€æœ‰å°åƒ å¿…é ˆå…¨éƒ¨æ¶ˆå¤± (ç¬¦åˆè¦æ±‚)
    clearAllFood();
}

// --- 3ï¸âƒ£ ç±ƒå­ï¼ˆç©å®¶è§’è‰²ï¼‰æ§åˆ¶ ---

// éµç›¤äº‹ä»¶ç›£è½
document.addEventListener('keydown', (e) => {
    if (!isGameRunning) return; 

    let newPositionX = basketPositionX;
    
    if (e.key === 'ArrowLeft' || e.key === 'a') {
        newPositionX -= basketSpeed;
    } else if (e.key === 'ArrowRight' || e.key === 'd') {
        newPositionX += basketSpeed;
    }

    // é‚Šç•Œæª¢æŸ¥
    if (newPositionX < 0) {
        newPositionX = 0;
    } else if (newPositionX > gameAreaWidth - basketWidth) {
        newPositionX = gameAreaWidth - basketWidth;
    }

    // æ‡‰ç”¨æ–°çš„ä½ç½®
    basketPositionX = newPositionX;
    basket.style.left = `${basketPositionX}px`;
});


// --- 4ï¸âƒ£ éŠæˆ²æ ¸å¿ƒé‚è¼¯ ---

// 1ï¸âƒ£ å‰µå»ºä¸€å€‹æ–°çš„æ‰è½å°åƒ
function createFood() {
    // éš¨æ©Ÿé¸æ“‡å°åƒåœ–ç‰‡
    const randomIndex = Math.floor(Math.random() * foodImages.length);
    const foodSrc = foodImages[randomIndex];
    
    const food = document.createElement('div');
    food.classList.add('falling-food');
    food.innerHTML = `<img src="${foodSrc}" alt="å°ç£å°åƒ">`;

    // éš¨æ©Ÿæ°´å¹³ä½ç½®
    const randomX = Math.floor(Math.random() * (gameAreaWidth - foodSize));
    
    food.style.left = `${randomX}px`;
    food.style.top = `-${foodSize}px`; // å¾ç•«é¢å¤–é–‹å§‹æ‰è½
    
    gameArea.appendChild(food);
}

// 2ï¸âƒ£, 3ï¸âƒ£ ç§»å‹•å°åƒã€ç¢°æ’åˆ¤æ–·ã€éŠæˆ²çµæŸæ¢ä»¶
function moveFoodAndCheckCollision() {
    // éæ­·æ‰€æœ‰æ‰è½ä¸­çš„å°åƒ
    const foods = document.querySelectorAll('.falling-food');
    
    // ç²å–ç±ƒå­æª¢æ¸¬ç¯„åœ
    const basketRect = {
        left: basketPositionX,
        top: gameAreaHeight - basket.clientHeight, // ç±ƒå­é ‚éƒ¨çš„ Y åº§æ¨™
        right: basketPositionX + basketWidth,
    };

    foods.forEach(food => {
        let currentTop = parseInt(food.style.top); 
        const foodLeft = parseInt(food.style.left);
        
        // å°åƒå¾€ä¸‹ç§»å‹•
        currentTop += foodSpeed;
        food.style.top = `${currentTop}px`;

        const foodBottomY = currentTop + foodSize;

        // 2ï¸âƒ£ ç¢°æ’åˆ¤æ–·
        // æ¢ä»¶ 1: å‚ç›´ç¯„åœæª¢æŸ¥ (å°åƒçš„åº•éƒ¨æ˜¯å¦èˆ‡ç±ƒå­é ‚éƒ¨é‡åˆ)
        const isCollidingY = (foodBottomY >= basketRect.top) && (foodBottomY <= basketRect.top + foodSpeed);
        
        // æ¢ä»¶ 2: æ°´å¹³ç¯„åœæª¢æŸ¥
        const isCollidingX = (foodLeft < basketRect.right) && (foodLeft + foodSize > basketRect.left);

        if (isCollidingY && isCollidingX) {
            // æ¥åˆ°å°åƒ â†’ åˆ†æ•¸ +1, å°åƒæ¶ˆå¤±
            food.remove(); 
            score++;
            scoreDisplay.textContent = score;

        } else if (currentTop > gameAreaHeight) {
            // 3ï¸âƒ£ éŠæˆ²çµæŸæ¢ä»¶ (å°åƒæ²’æœ‰è¢«æ¥åˆ°ï¼Œæ‰å‡ºç•«é¢åº•éƒ¨)
            food.remove();
            endGame();
        }
    });
}

// --- äº‹ä»¶ç¶å®š ---
startButton.addEventListener('click', startGame);
restartButton.addEventListener('click', startGame);

// é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
window.onload = initializeBasket;
